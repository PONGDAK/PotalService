<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xmlns:beans="http://www.springframework.org/schema/beans"
             xmlns:context="http://www.springframework.org/schema/context"
             xsi:schemaLocation="
        http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd">
    <!--컴포넌트 스캔 위치 지정 하위컴포넌트 전부 찾음-->
    <context:component-scan base-package="com.study.spring"/>
    <!--리퀘스트 메소드 핸들러 매핑 빈정리 어노테이션 기반 MVC 모두 처래해줌-->
    <annotation-driven/>
    <interceptors>
        <interceptor>
            <mapping path="/**/*"/>
            <beans:bean class="com.study.spring.mvc.HelloInterceptor"/>
        </interceptor>
    </interceptors>

    <!--ContentNegotiatingViewResolver를 쓸때 나머지 뷰리졸버 내재화시키는게 일반적 밖에있음 못태울수도있음-->
    <beans:bean class="org.springframework.web.servlet.view.ContentNegotiatingViewResolver">

        <!-- 사용자지정 확장자 -->
        <beans:property name="contentNegotiationManager">
            <beans:bean class="org.springframework.web.accept.ContentNegotiationManagerFactoryBean">
                <beans:property name="mediaTypes">
                    <beans:value>
                        js = application/json
                        x = application/xml
                    </beans:value>
                </beans:property>
            </beans:bean>
        </beans:property>
        <beans:property name="defaultViews">
            <beans:list>
                <beans:bean class="org.springframework.web.servlet.view.json.MappingJackson2JsonView"/>
                <beans:bean class="org.springframework.web.servlet.view.xml.MappingJackson2XmlView"/>
            </beans:list>
        </beans:property>
        <beans:property name="viewResolvers">
           <beans:list>
               <!--view resolver가 views/ 밑에 .jsp 파일중에서 찾아줌-->
               <beans:bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
                   <beans:property name="prefix" value="/WEB-INF/views/"/>
                   <beans:property name="suffix" value=".jsp"/>
               </beans:bean>
           </beans:list>
        </beans:property>
    </beans:bean>

    <!--/images/** 녀석이오면 /WEB-INF/static/에 넣어줘 -->
    <resources mapping="/images/**" location="/WEB-INF/static/"/>

    <!--id 값을 넣어줘야 제대로 정상 동작함-->
    <beans:bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver"/>
</beans:beans>